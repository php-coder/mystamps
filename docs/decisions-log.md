# Bugs, workarounds and project's decisions

| Date/Type | Description |
| --------- | ----------- |
| 20.06.2020 Decision | When I released 0.4 version after 5 years of development, I decided to [**make releases often**](https://en.wikipedia.org/wiki/Release_early,_release_often): every 3 months. In case when some planned issues haven't been implemented, they should be postponed to the next release and they shouldn't delay a release. Starting from 0.4.5 I've decided to make releases even more frequently -- *every 2 months*. This will improve our confidence that the release procedures are up-to-date. |
| 20.06.2020 Decision | [php-coder/mystamps#1159](https://github.com/php-coder/mystamps/issues/1159): based on experience, most of time when I made a dependency update, I spent on reading a list of changes. This came especially notable with Spring Boot updates when reading might took 85-90% of time because I had to read also changelogs of Spring Framework, Spring Security and sometimes other libraries. As a consequence of this approach, at this moment, we use old and unsupported Spring Boot version (2.0.x) while the current one is 2.3.x Decision: in order to keep up with new releases, we should sacrify the pedancy and a full understanding of the changes that happen with our dependencies. **Reading of changelogs** should be an optional and if an update passesd the integration tests, this is enough level of confidence. |
| 23.05.2020 Workaround | [php-coder/mystamps#1326](https://github.com/php-coder/mystamps/issues/1326): unfortunately, by default double quotes work differently on **MySQL** (the arguments are treated as strings) in contrast to other databases and our "fix" fixed nothing. To have a similar behavior we can set `sql_mode` to [`ANSI_QUOTES`](https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_ansi_quotes). Workaround: let's simply rename the field from `condition` to `cond` becase an dditional configuration of a database (or [a connection](https://stackoverflow.com/questions/58727070/how-to-dynamic-setting-sql-mode-for-mysql-in-springboot-program)) unnecessary complicates the setup. See also: [When to use single quotes, double quotes, and backticks in MySQL]( https://stackoverflow.com/questions/11321491/when-to-use-single-quotes-double-quotes-and-backticks-in-mysql). Extra decision: let's keep `DATABASE_TO_UPPER=false` parameter for **H2** as I prefer to see tables names in a lower case. Commits: [89ba68c0](https://github.com/php-coder/mystamps/commit/89ba68c0e11d59da55404614072f9eb757484243) |
| 22.05.2020 Workaround | [php-coder/mystamps#1326](https://github.com/php-coder/mystamps/issues/1326): when we decided to use double quotes for the `condition` field, we broke such queries on **H2**. This is because it behaves like Oracle and [converts unquoted identifiers to an upper case](https://stackoverflow.com/questions/10789994/make-h2-treat-quoted-name-and-unquoted-name-as-the-same), so the field is called `CONDITION` and when we quote it (`"condition"`), H2 couldn't find it because usage of the double quotes makes a field name case sensitive. Workaround: pass [`DATABASE_TO_UPPER=false`](https://www.h2database.com/javadoc/org/h2/engine/DbSettings.html#DATABASE_TO_UPPER) parameter to H2 to disable such behavior and be consistent with MySQL/PostgreSQL. Commits: [87df2dfa](https://github.com/php-coder/mystamps/commit/87df2dfabae9ef672fc8910139f3aadb46dd27d1) |
| 22.05.2020 Workaround | [php-coder/mystamps#1326](https://github.com/php-coder/mystamps/issues/1326): the field `condition` [has been added](https://github.com/php-coder/mystamps/commit/5648a0b121544e5326b22e801b0c23c502b59e3f) in order to persist a series condition. When we [started to use](https://github.com/php-coder/mystamps/commit/28eab066225a717d93fc95af2d947e45944f3ad1) the field, it has turned out that the SQL queries fail on **MySQL** because `condition` is a reserved keyword and should be quoted. We couldn't use apostrophes because it doesn't work on other databases. There was idea to rename the field to `cond`. Workaround: let's just double quote the field name as it should work everywhere and it's simpler. Commits: [74734a8d](https://github.com/php-coder/mystamps/commit/74734a8dc4071e9139efdf932750929869e9a370) |
| 22.05.2020 Workaround | [php-coder/mystamps#1398](https://github.com/php-coder/mystamps/issues/1398): After we switched to use HTTPS for a **0pdd** badge, it didn't show up in README.md file. Workaround: get back to using of HTTP in a link. Bug: [yegor256/0pdd#289](https://github.com/yegor256/0pdd/issues/289) Commits: [2d53575d](https://github.com/php-coder/mystamps/commit/2d53575d1c6a7b8ee9681d438fc4622e799e36c5) |
| 07.04.2020 Decision   | Add new type of change of commits: `improve` We need this because many changes in a series import are naturally fit into this category: they aren't new features as they are small, they aren't bugs as they were discovered during site usage. Unfortunately there is no related type in the current conventional commits specification. See discussions: [conventional-commits/conventionalcommits.org#66](https://github.com/conventional-commits/conventionalcommits.org/issues/66) and [conventional-commits/conventionalcommits.org#78](https://github.com/conventional-commits/conventionalcommits.org/issues/78)
| 07.03.2020 Workaround | [php-coder/mystamps#1072](https://github.com/php-coder/mystamps/issues/1072): AJAX-related tests don't work in **htmlunit** and fail with `ReferenceError: "Headers" is not defined`. When the code got updated to use another version of constructor of `Headers` class, tests fail with error `ReferenceError: "fetch" is not defined` error. Bug: [HtmlUnit/htmlunit#78](https://github.com/HtmlUnit/htmlunit/issues/78) Workaround: because "the fetch api is not supported so far", let's use axios library instead. Commits: [f224e94](https://github.com/php-coder/mystamps/commit/f224e944b367036458ce9d7ce0c596504766ef8e) |
| 07.03.2020 Workaround | [php-coder/mystamps#1072](https://github.com/php-coder/mystamps/issues/1072): `sendKeys()` method from **htmlunit** fails with `StringIndexOutOfBoundsException: start > length()` exception when we fill a field again. Bug: [HtmlUnit/htmlunit#142](https://github.com/HtmlUnit/htmlunit/issues/142) Workaround: open a page on every test to avoid a state from other tests. Commits: [943afba](https://github.com/php-coder/mystamps/commit/943afba4f60b3df47e678a274186b80702e7562c) |
| 09.02.2020 Workaround | **pdd** fails to parse files in charsets other than UTF-8 with error `invalid byte sequence in UTF-8`. Workaround: exclude `src/test/wiremock` directory. Bug: [yegor256/pdd#143](https://github.com/yegor256/pdd/issues/143) Commits: [30aab7d](https://github.com/php-coder/mystamps/commit/30aab7dc8c265804efef382422e7cae9e53187f3), [ab563b6](https://github.com/php-coder/mystamps/commit/ab563b653279625120121babccdfd915181ee46d) |
| 07.02.2020 Workaround | [php-coder/mystamps#1248](https://github.com/php-coder/mystamps/issues/1248): **wiremock** logs warnings for static resources when there is no stub mapping. Workaround: create mappings for such resources. Bug: [tomakehurst/wiremock#1247](https://github.com/tomakehurst/wiremock/issues/1247) Commits: [0018ad4](https://github.com/php-coder/mystamps/commit/0018ad44a21379b8179f94e954795c66b6d50bbc) |
| 24.11.2019 Workaround | [php-coder/mystamps#1156](https://github.com/php-coder/mystamps/issues/1156) After updating **html5validator** to 0.3.2, the `--ignore-re` has stopped to work. Workaround: revert and pin the version to 0.3.1 Bug: [svenkreiss/html5validator#64](https://github.com/svenkreiss/html5validator/issues/64) Commits: [9a0d695](https://github.com/php-coder/mystamps/commit/9a0d695ccac1deeba0c4280779bbac11ebf3ac4d) |
