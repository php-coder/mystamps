<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title th:text="|MyStamps: #{t_activation_title}|">MyStamps: account activation</title>
		<link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico" th:href="${FAVICON_ICO}" />
		<link rel="stylesheet" href="http://yandex.st/bootstrap/2.3.1/css/bootstrap.min.css" th:href="${BOOTSTRAP_CSS}" />
		<link rel="stylesheet" href="http://yandex.st/bootstrap/2.3.1/css/bootstrap-responsive.min.css" th:href="${BOOTSTRAP_RESPONSIVE_CSS}" />
		<link rel="stylesheet" href="../../static/styles/main.css" th:href="${MAIN_CSS}" />
	</head>
	<body lang="en" th:lang="${#locale.language == 'ru' ? 'ru' : 'en'}">
		<div class="row-fluid" id="header">
			<div id="logo" class="span10">
				<a href="../site/index.html" th:href="'/'" th:text="#{t_my_stamps}">My stamps</a>
			</div>
			
			<div id="user_bar" class="span2">
				<ul class="unstyled">
					<!--/*/
					<li sec:authorize="isAuthenticated()">
						<i class="icon-user"></i>
						<a sec:authentication="principal.user.name"
							href="../collection/info.html"
							title="Open my collection"
							th:title="#{t_open_my_collection}"
							th:href="@{${INFO_COLLECTION_PAGE}(id=${#authentication.principal.user.collection.id})}">
							John Doe
						</a>
					</li>
					/*/-->
					<li sec:authorize="isAnonymous()">
						<a href="../account/auth.html" th:href="@{${AUTHENTICATION_PAGE}}" th:text="#{t_enter}">Sign in</a>
					</li>
					<!--/*/
					<li sec:authorize="isAuthenticated()">
						<i class="icon-share"></i>
						<a href="../site/index.html" th:href="@{${LOGOUT_PAGE}}" th:text="#{t_logout}">Sign out</a>
					</li>
					/*/-->
					<li sec:authorize="isAnonymous()">
						<a href="../account/register.html" th:href="@{${REGISTRATION_PAGE}}" th:text="#{t_register}">Register</a>
					</li>
				</ul>
			</div>
		</div>
		<!--/*/
		<div class="row-fluid top-indent" th:if="${justRegisteredUser}">
			<div class="alert alert-success text-center span8 offset2" th:text="#{t_activation_sent_message}">
				Instructions to finish registration sent to your e-mail
			</div>
		</div>
		/*/-->
		<div class="row-fluid">
			<div id="content" class="span12">
				
				<h3 th:text="#{t_activation_on_site}">
					Account activation
				</h3>
				
				<!--/*/ <th:block sec:authorize="isAnonymous()"> /*/-->
					<div class="hint text-center">
						<small th:with="redAsterisk='&lt;span class=&quot;required_field&quot;&gt;*&lt;/span&gt;'">
							<span class="hint_item" th:utext="#{t_required_fields_legend(${redAsterisk})}">
								All fields marked by asterisk (<span class="required_field">*</span>) must be filled.
							</span>
						</small>
					</div>
					<div class="span6 offset3">
						<form method="post" class="form-horizontal" action="auth.html" th:action="@{${ACTIVATE_ACCOUNT_PAGE}}" th:object="${activateAccountForm}">
							
							<div class="control-group" th:classappend="${#fields.hasErrors('login') ? 'error' : ''}">
								<label for="login" class="control-label">
									<span class="field-label" th:text="#{t_login}">Login</span>
									<span id="login.required" class="required_field">*</span>
								</label>
								<div class="controls">
									<input type="text" id="login" required="required" th:field="*{login}" />
									<span id="login.errors" class="help-inline" th:if="${#fields.hasErrors('login')}" th:each="error : ${#fields.errors('login')}" th:text="${error}"></span>
								</div>
							</div>
							
							<div class="control-group" th:classappend="${#fields.hasErrors('name') ? 'error' : ''}">
								<label for="name" class="control-label">
									<span class="field-label" th:text="#{t_name}">Name</span>
								</label>
								<div class="controls">
									<input type="text" id="name" th:field="*{name}" />
									<span id="name.errors" class="help-inline" th:if="${#fields.hasErrors('name')}" th:each="error : ${#fields.errors('name')}" th:text="${error}"></span>
								</div>
							</div>
							
							<div class="control-group" th:classappend="${#fields.hasErrors('password') ? 'error' : ''}">
								<label for="password" class="control-label">
									<span class="field-label" th:text="#{t_password}">Password</span>
									<span id="password.required" class="required_field">*</span>
								</label>
								<div class="controls">
									<input type="password" id="password" required="required" th:field="*{password}" />
									<span id="password.errors" class="help-inline" th:if="${#fields.hasErrors('password')}" th:each="error : ${#fields.errors('password')}" th:text="${error}"></span>
								</div>
							</div>
							
							<div class="control-group" th:classappend="${#fields.hasErrors('passwordConfirmation') ? 'error' : ''}">
								<label for="passwordConfirmation" class="control-label">
									<span class="field-label" th:text="#{t_password_again}">Retype password</span>
									<span id="passwordConfirmation.required" class="required_field">*</span>
								</label>
								<div class="controls">
									<input type="password" id="passwordConfirmation" required="required" th:field="*{passwordConfirmation}" />
									<span id="passwordConfirmation.errors" class="help-inline" th:if="${#fields.hasErrors('passwordConfirmation')}" th:each="error : ${#fields.errors('passwordConfirmation')}" th:text="${error}"></span>
								</div>
							</div>
							
							<div class="control-group" th:classappend="${#fields.hasErrors('activationKey') ? 'error' : ''}">
								<label for="activationKey" class="control-label">
									<span class="field-label" th:text="#{t_activation_key}">Activation key</span>
									<span id="activationKey.required" class="required_field">*</span>
								</label>
								<div class="controls">
									<input type="text" id="activationKey" required="required" th:field="*{activationKey}" />
									<span id="activationKey.errors" class="help-inline" th:if="${#fields.hasErrors('activationKey')}" th:each="error : ${#fields.errors('activationKey')}" th:text="${error}"></span>
								</div>
							</div>
							
							<div class="form-actions">
								<input type="submit" class="btn btn-primary" value="Activate" th:value="#{t_activate}" />
							</div>
							
						</form>
					</div>
				<!--/*/ </th:block> /*/-->
			</div>
		</div>
		<!--/*/
		<div class="row-fluid" sec:authorize="isAuthenticated()">
			<div class="alert alert-info text-center span8 offset2" th:text="#{t_already_activated}">
				You already activated account.
			</div>
		</div>
		<!--/*/
		<div class="row-fluid">
			<footer class="text-right">
				<i class="icon-envelope"></i>
				<a href="mailto:slava.semushin@gmail.com" title="Write e-mail" th:href="|mailto:#{t_site_author_email}|" th:title="#{t_write_email}" th:text="#{t_site_author_name}">Slava Semushin</a>, 2009-2014
			</footer>
		</div>
		
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="http://yandex.st/bootstrap/2.3.1/js/bootstrap.min.js" th:src="${BOOTSTRAP_JS}"></script>
	</body>
</html>
